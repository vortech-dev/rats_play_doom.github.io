<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rats Play Doom</title>
    <link rel="icon" href="images/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">

    <!-- Babylon.js for 3D viewer -->
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>

    <!-- Local JS for 3D viewer -->
    <script defer src="assets/js/util.js"></script>
    <script defer src="assets/js/main.js"></script>

    <style>
        body {
            background-image: url('images/background.png');
            background-size: cover; /* Scale the image to cover the entire element */
            background-position: center; /* Center the image */
            background-repeat: no-repeat; /* Do not repeat the image */
            background-attachment: fixed; /* Keep the background fixed during scroll */
            /* Optional: Add a fallback background color */
            background-color: #000; /* Black fallback */
        }
    </style>
    <script>
        !function(t,e){var o,n,p,r;e.__SV||(window.posthog && window.posthog.__loaded)||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init zr Wr fi Br Gr ci Nr Hr capture Ui calculateEventProperties Kr register register_once register_for_session unregister unregister_for_session Zr getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey displaySurvey cancelPendingSurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty Xr Jr createPersonProfile Qr jr ts opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing get_explicit_consent_status is_capturing clear_opt_in_out_capturing Vr debug O Yr getPageViewId captureTraceFeedback captureTraceMetric Or".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
        posthog.init('phc_EMDtRgAuNrpaKjgkN5rmC8AYX8OzD2VJqaxSMQhUBv7', {
            api_host: 'https://us.i.posthog.com',
            defaults: '2025-11-30',
            person_profiles: 'identified_only', // or 'always' to create profiles for anonymous users as well
        })
    </script>
</head>
<body>
    <header id="header">
        <h1>Rats Play DOOM</h1>

        <nav>
            <a href="#intro">Intro</a>
            <a href="#hardware">Hardware</a>
            <a href="#software">Software</a>
            <a href="#results">Results</a>
            <a href="hardware-guide.html">Hardware Guide</a>
        </nav>

        <!-- Top Links Group -->
        <div class="header-top-links">
            <a href="https://x.com/yolorun_capital" target="_blank" class="contact-link anim-pulse-2" id="contact-x">&#x1D54F; YoloRun</a>
            <a href="https://github.com/csiki/rat_vr2" target="_blank" class="contact-link" id="contact-github">üíª GitHub Repo</a>
            <a href="https://yolorun.capital" target="_blank" class="contact-link" id="contact-yolorun">üí∞ YoloRun.Capital</a>
        </div>

        <!-- Bottom Links Group -->
        <div class="header-bottom-links">
            <a href="https://www.vice.com/en/article/i-trained-rats-science-experiment-to-become-doom-2-gamers" target="_blank" class="contact-link anim-color-shift-1" id="contact-vice"><img src="assets/images/logos/Vice_Logo.svg" alt="Vice Logo" class="contact-logo invert-logo"> Article</a>
            <a href="https://www.pcgamer.com/rats-named-carmack-and-romero-are-playing-doom" target="_blank" class="contact-link anim-float-2" id="contact-pcgamer"><img src="assets/images/logos/PC_Gamer_logo.svg" alt="PC Gamer Logo" class="contact-logo"> Article</a>
            <a href="https://medium.com/mindsoft" target="_blank" class="contact-link anim-pulse-1" id="contact-medium">üß† Mindsoft @ Medium</a>
            <a href="javascript:void(0);" class="contact-link anim-float-1" id="contact-email" data-email="viktor@yolorun.capital">üìß viktor@yolorun.capital</a>
        </div>

    </header>

    <!-- Floating Navigation Bar -->
    <div id="floating-navbar" class="floating-navbar">
        <div class="floating-nav-container">
            <!-- Logo/Brand -->
            <div class="floating-nav-logo">
                <a href="/" class="logo-link">
                    <img src="images/logo.png" alt="Logo" class="floating-logo">
                </a>
            </div>
            
            <!-- Main Navigation -->
            <nav class="floating-nav-menu">
                <a href="#intro" class="floating-nav-link" data-section="intro"><span class="nav-full">Intro</span><span class="nav-short">Intro</span></a>
                <a href="#hardware" class="floating-nav-link" data-section="hardware"><span class="nav-full">Hardware</span><span class="nav-short">HW</span></a>
                <a href="#software" class="floating-nav-link" data-section="software"><span class="nav-full">Software</span><span class="nav-short">SW</span></a>
                <a href="#results" class="floating-nav-link" data-section="results"><span class="nav-full">Results</span><span class="nav-short">Results</span></a>
                <a href="hardware-guide.html" class="floating-nav-link"><span class="nav-full">Hardware Guide</span><span class="nav-short">Guide</span></a>
            </nav>
            
            <!-- Hamburger Menu -->
            <div class="hamburger-menu">
                <div class="hamburger-icon" id="hamburger-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <div class="hamburger-dropdown" id="hamburger-dropdown">
                    <a href="https://x.com/yolorun_capital" target="_blank" class="dropdown-link">ùïè YoloRun</a>
                    <a href="https://github.com/csiki/rat_vr2" target="_blank" class="dropdown-link">üíª GitHub Repo</a>
                    <a href="https://yolorun.capital" target="_blank" class="dropdown-link">üí∞ YoloRun.Capital</a>
                    <a href="https://www.vice.com/en/article/i-trained-rats-science-experiment-to-become-doom-2-gamers" target="_blank" class="dropdown-link">üì∞ Vice Article</a>
                    <a href="https://www.pcgamer.com/rats-named-carmack-and-romero-are-playing-doom" target="_blank" class="dropdown-link">üéÆ PC Gamer Article</a>
                    <a href="https://medium.com/mindsoft" target="_blank" class="dropdown-link">üß† Mindsoft @ Medium</a>
                    <a href="javascript:void(0);" class="dropdown-link copy-email-link" data-email="viktor@yolorun.capital">üìß viktor@yolorun.capital</a>
                </div>
            </div>
        </div>
    </div>

    <main>
        <section id="intro">
            <h2>Intro</h2>
            <p>We built a complete VR setup from scratch to let rats play DOOM. The system includes a motion-tracked treadmill ball, a panoramic headset, an input trigger, and a reward circuit. All hardware and software components are open sourced, including 3D-printable designs, circuit diagrams, firmware, and control software.</p>
            <p>The first version (v1) was built in New York by <a href="#team">Viktor</a>, who trained rats to walk through a corridor in DOOM using a simpler rig. That version was featured on Vice and PC Gamer. After moving back home, the project was paused. Public interest reignited development, leading to v2, a more advanced and modular version built in collaboration with electrical engineer <a href="#team">S√°ndor Makra</a>. <a href="#team">Akos Blaschek</a> later assisted significantly in documenting the project for open-sourcing, aiming to enable others to replicate and build upon this work. Key metallic components were designed and sourced in collaboration with <a href="https://szurwinkft.hu/" target="_blank" rel="noopener noreferrer">SZURWIN KFT</a>.</p>

            <h3>V1</h3>
            <ul>
                <li>Basic ball setup</li>
                <li>Rats trained to run forward</li>
                <li>Minimal sensors and mechanics</li>
                <li>No panoramic screen</li>
            </ul>
            <figure>
                <a href="images/v1.jpg" target="_blank" rel="noopener noreferrer"><img src="images/v1.jpg" alt="Rat VR Setup Version 1" class="content-image-small"></a>
                <figcaption>Rat VR Setup Version 1</figcaption>
            </figure>

            <h3>V2</h3>
            <ul>
                <li>New ball driver mechanism for smoother movement</li>
                <li>Foldable AMOLED screen with 180¬∞ horizontal and 80¬∞ vertical FOV, Full HD resolution</li>
                <li>Upgraded sensors for movement tracking</li>
                <li>Reinforced feeder system with mixing motor</li>
                <li>Modular 3D-printable components</li>
                <li>Improved electronics reliability and safety</li>
            </ul>
            <figure>
                <a href="images/v2.jpg" target="_blank" rel="noopener noreferrer"><img src="images/v2.jpg" alt="Rat VR Setup Version 2" class="content-image-small"></a>
                <figcaption>Rat VR Setup Version 2</figcaption>
            </figure>

            <figure>
                <a href="images/rat_vr_setup.png" target="_blank" rel="noopener noreferrer"><img src="images/rat_vr_setup.png" alt="Full setup from side showing rat on ball, screen around, trigger, and water tube." class="content-image-small"></a>
                <figcaption>Full setup from side showing rat on ball, screen around, trigger, and water tube.</figcaption>
            </figure>

            <h3>Limitations</h3>
            <p>We reached the point of rat habituation but didn‚Äôt start training. Our rats (Todd, Kojima, Gabe) aged out before full testing. The setup works, but behavioral validation is pending.</p>
        </section>

        <section id="hardware">
            <h2>Hardware</h2>
            <p>The hardware is a comprehensive VR rig designed for rodents. It consists of a motion-tracked sphere that captures the rat's movements, a custom-built trigger for in-game actions, a curved panoramic screen for visual immersion, and an automated reward system that dispenses sugar water to reinforce behavior. All these components are mounted on a modular aluminum frame, creating a complete, self-contained environment for the rat to interact with the game.</p>
            <p style="text-align: center; margin-top: 2rem; margin-bottom: 2rem;"><a href="hardware-guide.html" class="contact-link anim-pulse-2" style="font-size: 1.2em; padding: 0.8em 1.5em;">View the Hardware Assembly Guide</a></p>

            <article>
                <h3>Visual Interface</h3>
                <p>The headset wraps around the rat‚Äôs head with a foldable AMOLED screen. It maximizes immersion without obstructing whisker space. The screen supports Full HD resolution.</p>
                <p>The headset frame also integrates several sensory components: two small air nozzles are positioned near the left and right whiskers, capable of delivering targeted air puffs on command (e.g., signaling wall collisions in-game). The frame provides a secure mounting point for the reward system's dispenser tube, placing it near the rat's mouth. Additionally, the design includes placeholders for miniature speakers near each ear, intended for future implementation of stereo audio cues.</p>
                <div class="video-container">
                    <iframe src="https://www.youtube.com/embed/P9gwOoqymwU?autoplay=1&mute=1&controls=0&loop=1&playlist=P9gwOoqymwU&modestbranding=1" title="YouTube video player - Headset Exploded View" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                </div>
                <div class="viewer-container">
                    <canvas id="headsetCanvas"></canvas>
                    <figure>
                        <a href="images/headset.jpg" target="_blank" rel="noopener noreferrer"><img src="images/headset.jpg" alt="Headset close-up from above." class="content-image-large"></a>
                        <figcaption>Headset close-up.</figcaption>
                    </figure>
                </div>
                 <p class="model-label">3D Model: Headset</p>
            </article>

            <article>
                <h3>Locomotion</h3>
                <p>Movement is captured via a free-spinning ball under the rat. Rotary sensors track displacement and convert it into game motion. The ball can also be driven by motors.</p>
                <p>These motors are used during training to roll the ball and simulate movement paths before a reward. This guides the rat on where to go, helping form movement-action associations. Like the trigger, this allows for programmatic training sequences with minimal initial input from the animal.</p>
                <div class="video-container">
                    <iframe src="https://www.youtube.com/embed/Si52Hq2ywFA?autoplay=1&mute=1&controls=0&loop=1&playlist=Si52Hq2ywFA&modestbranding=1" title="YouTube video player - Locomotion Exploded View" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                </div>
                <div class="video-container">
                    <iframe src="https://www.youtube.com/embed/I3_HG0WWtGk?autoplay=1&mute=1&controls=0&loop=1&playlist=I3_HG0WWtGk&modestbranding=1" title="YouTube video player - Ball Sensor Manual Testing" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                </div>
                 <div class="viewer-container">
                    <canvas id="standCanvas"></canvas>
                    <figure>
                        <a href="images/stand.jpg" target="_blank" rel="noopener noreferrer"><img src="images/stand.jpg" alt="Ball mount showing driven/undriven modes and sensor placement." class="content-image-large"></a>
                        <figcaption>Ball mount showing driven/undriven modes and sensor placement.</figcaption>
                    </figure>
                </div>
                 <p class="model-label">3D Model: Stand/Ball</p>
            </article>

            <article>
                <h3>Trigger Input</h3>
                <p>The shooting input is a custom-built hand-operated lever. Rats pull it with their paws to fire. The lever is held in place by small springs, encased in a 3D-printed housing. It includes a rotary encoder to detect motion and a stepper motor to actuate it.</p>
                <p>The motor allows programmatic control‚Äîpulling the lever to demonstrate shooting. This enables training by pairing visual cues with mechanical motion, reinforcing the association before the rat initiates the action on its own.</p>
                <div class="video-container">
                    <iframe src="https://www.youtube.com/embed/vIzxP3GrOaw?autoplay=1&mute=1&controls=0&loop=1&playlist=vIzxP3GrOaw&modestbranding=1" title="YouTube video player - Trigger Manual Testing" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                </div>
                 <div class="viewer-container">
                     <canvas id="triggerCanvas"></canvas>
                    <figure>
                        <a href="images/trigger.jpg" target="_blank" rel="noopener noreferrer"><img src="images/trigger.jpg" alt="Close-up of trigger lever with encoder and motor." class="content-image-large"></a>
                        <figcaption>Close-up of trigger lever with encoder and motor.</figcaption>
                    </figure>
                </div>
                <p class="model-label">3D Model: Trigger</p>
            </article>

            <article>
                <h3>Reward System</h3>
                <p>Positive in-game actions trigger a liquid reward: sugar water delivered through a precise dispensing mechanism. The system consists of:</p>
                <ul>
                    <li>Mixer: Continuously stirs the sugar solution to maintain even concentration</li>
                    <li>Pump + Pressure Sensor: Keeps the line under constant pressure</li>
                    <li>Solenoid Valve: Magnetic valve that opens to release exact 10 ¬µL doses</li>
                    <li>Dispenser: Positioned near the mouth for easy access</li>
                </ul>
                <p>This setup ensures accurate, repeatable reward delivery with minimal delay. The reward is synchronized with game events to reinforce desired behaviors.</p>
                <figure>
                    <a href="images/reward_circuit.jpg" target="_blank" rel="noopener noreferrer"><img src="images/reward_circuit.jpg" alt="Reward circuit with labeled mixer, pump, valve, and dispenser." class="content-image-small"></a>
                    <figcaption>The messy but functional reward circuit from behind.</figcaption>
                </figure>
            </article>

            <article>
                <h3>Limitations</h3>
                <p>The current system assumes basic rat mobility and grooming behavior. Fine-tuning might be needed for rats of different sizes or temperaments. Trigger placement and reward tube flow may need calibration per subject.</p>
            </article>
        </section>

        <section id="software">
            <h2>Software</h2>
            <p>The setup is controlled through a modular Python system. The main entry point is <code>arena_scenario.py</code>, which runs the full control loop.</p>
            <p>The system includes:</p>
            <ul>
                <li>Motion capture: Reads movement from optical flow sensors mounted around the treadmill ball.</li>
                <li>Locomotion control: Drives the ball motors to guide the rat during training.</li>
                <li>Trigger input: Reads lever pulls, detects voluntary shooting actions.</li>
                <li>Reward delivery: Dispenses precise 10 ŒºL sugar water rewards via a controlled solenoid valve and maintains constant line pressure.</li>
                <li>DOOM integration: Interfaces with a modified ViZDoom environment for real-time closed-loop behavior.</li>
                <li>Training logic: Enforces demonstrations and delivers rewards based on game state and rat behavior.</li>
            </ul>
            <p style="text-align: center; margin-top: 2rem; margin-bottom: 2rem;"><a href="https://github.com/csiki/rat_vr2" target="_blank" class="contact-link anim-pulse-2" style="font-size: 1.2em; padding: 0.8em 1.5em;">View the Project on GitHub</a></p>
            <p>The software runs on a PC and communicates with a Raspberry Pi via TCP sockets. The Pi handles real-time sensor reading, ball actuation, and reward control; the PC processes the sensor data, runs the game, and sends high-level commands to the Pi.</p>
            <p>All major components‚Äîmovement tracking, ball driving, trigger detection, and reward control‚Äîcan be operated manually or in closed-loop mode. All control parameters (e.g., motor speeds, reward volumes) are set in Python code.</p>

            <h3>Limitations</h3>
            <p>There‚Äôs no in-built calibration suite. Users must validate sensor alignment and reward timing manually. Some microcontroller firmwares might require tuning based on hardware tolerances.</p>
        </section>

        <section id="results">
            <h2>Results</h2>
            <p>The rats successfully learned to navigate the virtual environment and trigger the shooting mechanism. Habituation took approximately two weeks per rat. While advanced training wasn't completed due to time constraints, initial data showed promising engagement with the system.</p>
            <figure>
                <img src="images/placeholder_rat_playing.png" alt="Rat engaging with the VR setup during a session.">
                <figcaption>Rat interacting with the VR setup.</figcaption>
            </figure>
            <h3>Limitations</h3>
            <p>Full behavioral validation requires longer training periods. Cross-subject variability wasn't extensively studied. The impact of prolonged VR exposure on rat well-being needs further research.</p>
        </section>

        <section id="what-now">
            <h2>What Now?</h2>
            <p>Interested in building your own animal VR setup? Feel free to reach out for guidance. We're also compiling a comprehensive <a href="hardware-guide.html">Rat VR Build Guide</a>.</p>
            <p>At <a href="https://yolorun.capital" target="_blank" rel="noopener noreferrer">YoloRun.Capital</a>, we invest in ambitious, boundary-pushing projects like this, even the beautifully impractical ones. Have a wild idea? Let's talk.</p>
            <figure>
                <img src="images/christmas_rat_600w.jpg" alt="A rat wearing a tiny Santa hat.">

            </figure>
        </section>

        <section id="team">
            <h2>Team</h2>
            <div class="team-container">
                <div class="team-member">
                    <img src="assets/images/team/viktor.jpg" alt="Viktor T√≥th" class="profile-pic">
                    <h3 class="name">Viktor T√≥th</h3>
                    <p class="role">Gamer Rat Coach</p>
                    <div class="social-links">
                        <p><a href="https://www.linkedin.com/in/viktor-t%C3%B3th-92580395/" target="_blank"><img src="assets/images/logos/LinkedIn_logo.svg" alt="LinkedIn Logo" class="social-icon"> LinkedIn</a></p>
                        <p><a href="https://github.com/csiki" target="_blank" class="team-contact-link">üíª GitHub</a></p>
                        <p><a href="javascript:void(0);" class="team-contact-link copy-email-link" data-email="viktor@yolorun.capital">üìß viktor@yolorun.capital</a></p>
                    </div>
                </div>
                <div class="team-member">
                    <img src="assets/images/team/sandor.jpg" alt="S√°ndor Makra" class="profile-pic">
                    <h3 class="name">S√°ndor Makra</h3>
                    <p class="role">Electrical Engineer</p>
                     <div class="social-links">
                        <p><a href="https://www.linkedin.com/in/s%C3%A1ndor-makra-333166126/" target="_blank"><img src="assets/images/logos/LinkedIn_logo.svg" alt="LinkedIn Logo" class="social-icon"> LinkedIn</a></p>
                    </div>
                </div>
                <div class="team-member">
                    <img src="assets/images/team/akos.jpg" alt="√Åkos Blaschek" class="profile-pic">
                    <h3 class="name">√Åkos Blaschek</h3>
                    <p class="role">Documentation Lead</p>
                     <div class="social-links">
                        <p><a href="https://www.linkedin.com/in/%C3%A1kos-blaschek-5ab4771a4/" target="_blank"><img src="assets/images/logos/LinkedIn_logo.svg" alt="LinkedIn Logo" class="social-icon"> LinkedIn</a></p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer>
        <p>&copy; 2025 Rats Play Doom Project - Open Source Hardware & Software</p>
        <!-- Add links to GitHub repo, etc. here later -->
    </footer>

</body>
</html>
